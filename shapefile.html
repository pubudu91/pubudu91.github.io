<!doctype html><html><head><title>PropNets Visualizer</title><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes"><script src="../bower_components/webcomponentsjs/webcomponents.js">
    </script><link rel="import" href="../bower_components/font-roboto/roboto.html"><link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html"><link rel="import" href="../bower_components/iron-icons/iron-icons.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html"><link rel="import" href="../bower_components/paper-tabs/paper-tabs.html"><link rel="import" href="../bower_components/paper-drawer-panel/paper-drawer-panel.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="stylesheet" href="shapetest/shapefile.css" charset="utf-8"><script type="text/javascript" src="shapetest/jquery-1.11.3.min.js"></script><script type="text/javascript" src="shapetest/d3.min.js"></script><script type="text/javascript" src="shapetest/csv.min.js"></script><script type="text/javascript" src="shapetest/index.js"></script><script src="shapetest/shp.min.js" charset="utf-8"></script><script src="propnets.js" charset="utf-8"></script><script src="shapetest/fileupload.js" charset="utf-8"></script><style>
      html,
      body {
        /*height: 100%;*/
        margin: 0;
        background-color: #E5E5E5;
        font-family: 'RobotoDraft', sans-serif;
        font-size: 14px;
      }

      #container {
        /*height: 100%;*/
      }

      #networkfilename {
        font-size: 14px;
      }

      #visualizebtn {
        /*width: 150px;
        height: 30px;
        margin: 0;
        padding: 0;
        padding-bottom: 5px;*/
        text-align: center;
        background: rgb(25, 92, 193);
        color: white;
      }
    </style></head><body unresolved=""><paper-drawer-panel id="drawerPanel" force-narrow="" drawer-width="30em"><paper-header-panel drawer=""><paper-toolbar><paper-icon-button icon="arrow-back" id="toggleBack"></paper-icon-button><span class="title">Menu</span></paper-toolbar><paper-tabs selected="{{selected}}"><paper-tab name="tab1">Tab 1</paper-tab><paper-tab name="tab2">Tab 2</paper-tab><paper-tab name="tab3">Tab 3</paper-tab></paper-tabs><iron-pages selected="0"><div class="left-padding"><input type="file" id="files" name="files[]" single=""><select name="selectfile" id="selectfile" hidden="true"></select><input type="submit" id="upload" value="Draw Map" disabled="true"></div><div class="left-padding"><input type="file" id="csvnetwork" name="files[]" hidden="true" multiple=""><div><h5>Upload network data:</h5><paper-icon-button icon="file-upload" id="csvuploadbtn"></paper-icon-button><output id="networkfilename"></output><paper-icon-button icon="send" id="parsenetwork" hidden="true"></paper-icon-button></div><div><h5>Upload network flow data:</h5><input type="file" id="csvfiles" name="files[]" hidden="true" multiple=""><paper-icon-button icon="file-upload" id="flowuploadbtn"></paper-icon-button><output id="flowfilename"></output><paper-icon-button icon="send" id="parse" hidden="true"></paper-icon-button></div><br><div style="text-align: center;"><paper-button raised="" id="visualizebtn"><paper-icon-button icon="check" class="remove-padding"></paper-icon-button>Visualize</paper-button></div><div id="details"></div><br><div id="decoded" style="width: 250px;"></div></div><div>Three</div></iron-pages></paper-header-panel><paper-header-panel main=""><paper-toolbar id="header"><paper-icon-button icon="menu" id="toggleMenu"></paper-icon-button><span class="title">PropNets Visualizer</span><paper-icon-button icon="refresh"></paper-icon-button><paper-icon-button icon="add">+</paper-icon-button></paper-toolbar><div id="container"><div id="map"></div><div id="tooltip"></div></div></paper-header-panel></paper-drawer-panel><script>
      var menu = document.getElementById('toggleMenu');
      var back = document.getElementById('toggleBack');
      var drawerPanel = document.getElementById('drawerPanel');
      var tabs = document.querySelector('paper-tabs');
      var containers = document.getElementsByClassName('tabcontent');
      var csvnetwork = document.getElementById('csvnetwork');
      var csvflowdata = document.getElementById('csvfiles');
      var flowdatauploadbtn = document.getElementById('flowuploadbtn');

      menu.addEventListener('click', function() {
        drawerPanel.togglePanel();
      });

      back.addEventListener('click', function() {
        drawerPanel.togglePanel();
      });

      csvuploadbtn.addEventListener('click', function() {
        $('#csvnetwork').click();
      });

      flowuploadbtn.addEventListener('click', function() {
        $('#csvfiles').click();
      });

      csvnetwork.addEventListener('change', function() {
        document.getElementById('networkfilename').value = csvnetwork.value.replace(/.*[\/\\]/, '');
        document.getElementById('parsenetwork').hidden = false;
      });

      csvfiles.addEventListener('change', function() {
        document.getElementById('flowfilename').value = csvflowdata.value.replace(/.*[\/\\]/, '');
        document.getElementById('parse').hidden = false;
      });

      console.log(tabs);
      console.log(containers);

      tabs.addEventListener('click', function(e) {
        var pages = document.querySelector('iron-pages');
        pages.select(this.selected);
      });
    </script><script type="text/javascript">
      PropNets.init('files', 'upload', 'selectfile');
      // DataHandler.init();
      document.getElementById('parsenetwork').addEventListener('click', function() {
        PropNets.readCSVFile('csvnetwork');
      })

      document.getElementById('parse').addEventListener('click', function() {
        // PropNets.setData(DataHandler.decodedData);
        PropNets.readCSVFile('csvfiles');
      })

      document.getElementById('visualizebtn').addEventListener('click', function() {
        // PropNets.setData(DataHandler.decodedData);
        PropNets.visualize();
      })
    </script></body></html>